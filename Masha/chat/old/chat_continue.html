<html>
<head>
    <meta charset="UTF-8">
<head>
<body>
    <p>Число сообщений:  <b id="report"></b></p>
</body>
<script>
    var last_message = 0;
    var msg_dowloaded = 0;
    // Эта функция отслеживает появление новых сообщений
    function alertLastMsg() 
        {
            let timerId = setInterval
            (
                function() 
                {
                    var last_message; 

                    fetch("https://chat.v1.prod.online-it-school.com/get_latest_msg_id")
                    .then((response) => response.json())
                    .then((data) => get_msg(data));
                    if (current == to) 
                    {
                        clearInterval(timerId);
                    }
                    current++;
                }
                , 1000
            );  
        };

    // Эта функция выводит новое количество сообщений
    function get_msg(data)
    {
        last_message = data;
        if (last_message != msg_dowloaded)
            {
            alert(last_message);
            document.getElementById("report").innerHTML = last_message;
            msg_dowloaded = last_message;
            }
    }
</script>

</html>