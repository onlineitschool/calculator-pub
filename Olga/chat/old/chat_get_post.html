<html>
    <meta charset="UTF-8">
    <head>

        <script src="jquery360.js"></script>
    
    </head>
    <body>
        <p>Здесь я учусь отправлять сообщение в общий чат.
        </p>
        <p>Для этого я отправляю запрос POST при помощи AJAX.</p>
       
        <p>Ваше имя: <input id="input_name" value="default name"></input></p>
        <p>Ваше сообщение: <input id="message"></input>
        <p><button id="send_msg" onclick="send_msg()">Отправить сообщение</button></p>


            <div id="div_chat"></div>

    </body>

    <script>


        function send_msg() {
            console.log("Send Message")
        
            var name = document.getElementById("input_name").value
            var message = document.getElementById("message").value
        
            //cl("click send jsonp")
        
                var data = {
                    "name" : name,
                    "msg" : message
                }
        
                console.log(data)


                $.ajax({
                    type: "POST",
                    url: "https://chat.v1.prod.online-it-school.com/add",
                    data: data,
                    success: function(a, b){
                        console.log(a)
                        get_all_msg()
                    },
                    error: function(a, b) {
                        console.log("error")
                    }
                });
        
        }
        
        function get_all_msg() {

            $.ajax({
                url: "https://chat.v1.prod.online-it-school.com/get_all_messages_html1",
                
                success: function(x, y){
                    console.log(x)
                    $("#div_chat").html(x)
                    //document.getElementById("div_chat").innerHTML = x
                },
                
                });
            }

        </script>
        
        
        </body>
        
        
        </html>